import{R as h,j as e}from"./index-CMRZlNq0.js";import{y as c,g as p,r as x,L as b}from"./index-C1GQB77E.js";class f extends h.Component{constructor(r){document.title="MDP Dealer Sharepoint Data Provider",super(r),this.state={isLoaded:!1,dealerDataList:[]}}componentDidMount(){}notifyError=r=>c.error(r);callApi=r=>{r.preventDefault();const s=r.target.dealerCodesInput.value;console.log("Calling API with dealer codes:",s),this.setState({isLoaded:!1});const a=s.split(",").map(t=>{let o=t.trim();return o=o.replaceAll('"',""),o=o.replaceAll("'",""),o}).filter(t=>t!=="");fetch(p()+"/mdp/v1/dealers/data",x(JSON.stringify(a))).then(t=>{t.ok?(console.log("Response from API : ",t),t.json().then(o=>{console.log("API Response data : ",o.data);const i=o.data.map(d=>{const l=d.locations.find(n=>n.type==="MAIN");return{sap_dealer_code:d.dealer.sapDealerCode,type:d.dealer.type,name:d.dealerDetails.name,city:l.city,area:l.area,zone:l.zone}});this.setState({isLoaded:!0,dealerDataList:i})})):t.text().then(o=>{console.error("Error from API:",o),this.notifyError("Error from MDP API : "+t.status+" : "+o)})}).catch(t=>{console.error("Error during API call:",t),this.notifyError("Error from MDP API : "+t.message)})};render(){return console.log("MdpTest : render() : this.state = ",this.state),e.jsxs("div",{className:"MdpDealerSharepointDataProvider",children:[e.jsx("h1",{children:"MDP Dealer SharePoint data Provider"}),e.jsxs("div",{children:["This page will help in exctracting dealer details for adding to the SharePoint list",e.jsx("br",{})]}),e.jsx("br",{}),e.jsxs("form",{onSubmit:this.callApi,children:[e.jsx("textarea",{rows:"5",cols:"100",type:"text",required:!0,placeholder:'Enter comma separated Dealer Codes (like : `10015,10016, BD1001609, "BD1001504"`)',id:"dealerCodesInput"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"submit",children:"Get data"})]}),e.jsx("br",{}),e.jsx("hr",{}),e.jsx("br",{}),this.state.isLoaded?e.jsxs("table",{style:{borderWidth:"1px",borderColor:"#000000",borderStyle:"solid",borderCollapse:"collapse",fontFamily:"Calibri, sans-serif",fontSize:"10px"},children:[e.jsx("thead",{style:{borderWidth:"1px",borderColor:"#000000",borderStyle:"solid"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"sap_dealer_code"}),e.jsx("th",{children:"type"}),e.jsx("th",{children:"name"}),e.jsx("th",{children:"city"}),e.jsx("th",{children:"area"}),e.jsx("th",{children:"zone"})]})}),e.jsx("tbody",{style:{borderWidth:"1px",borderColor:"#000000",borderStyle:"solid"},children:this.state.dealerDataList.map((r,s)=>e.jsxs("tr",{style:{borderWidth:"1px",borderColor:"#000000",borderStyle:"solid"},children:[e.jsx("td",{style:{borderWidth:"1px",borderColor:"#000000",borderStyle:"solid"},children:r.sap_dealer_code}),e.jsx("td",{style:{borderWidth:"1px",borderColor:"#000000",borderStyle:"solid"},children:r.type}),e.jsx("td",{style:{borderWidth:"1px",borderColor:"#000000",borderStyle:"solid"},children:r.name}),e.jsx("td",{style:{borderWidth:"1px",borderColor:"#000000",borderStyle:"solid"},children:r.city}),e.jsx("td",{style:{borderWidth:"1px",borderColor:"#000000",borderStyle:"solid"},children:r.area}),e.jsx("td",{style:{borderWidth:"1px",borderColor:"#000000",borderStyle:"solid"},children:r.zone})]},s))})]}):e.jsx("p",{children:"üìç Your Data will be visible here"}),e.jsx(b,{position:"bottom-right",autoClose:!1})]})}}export{f as default};
